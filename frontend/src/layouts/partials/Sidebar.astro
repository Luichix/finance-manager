---
import { AiOutlineAppstore } from "react-icons/ai";
import { LuPieChart } from "react-icons/lu";
import { CgProfile } from "react-icons/cg";
import { MdLogout } from "react-icons/md";
import User from "@/components/User";
import { FaBars } from "react-icons/fa";
---

<div class="fixed top-1 right-3 md:hidden">
  <button type="button" id="button-sidebar">
    <FaBars size={28} className="text-primary" /></button
  >
</div>
<nav class="sidebar sidebar-show">
  <User transition:persist client:load />
  <ul class="sidebar-links">
    <li>
      <a href="/transactions" class="text-white"
        ><AiOutlineAppstore size={30} /> Transacciones</a
      >
    </li>
    <li>
      <a href="/reports" class="text-white">
        <LuPieChart size={28} /> Reportes</a
      >
    </li>
    <li>
      <a href="/account" class="text-white"> <CgProfile size={28} /> Account</a>
    </li>
    <li>
      <a id="logout" href="/">
        <MdLogout size={28} />Salir
      </a>
    </li>
  </ul>
</nav>

<script>
  import { STORAGE_KEY_LOGIN, USER_INFO_DEFAULT, userInfo } from "@/store";
  import { removeToStorage, saveToStorage } from "@/utils/localStorage";

  const logout = () => {
    removeToStorage(STORAGE_KEY_LOGIN);
    userInfo.set(USER_INFO_DEFAULT);
    saveToStorage(STORAGE_KEY_LOGIN, USER_INFO_DEFAULT);
  };

  const sesion = document.getElementById("logout");
  const button = document.getElementById("button-sidebar");
  if (sesion) {
    sesion.addEventListener("click", logout);
  }

  if (button) {
    button.addEventListener("click", () => {
      console.log("Hello");
    });
  }
</script>
